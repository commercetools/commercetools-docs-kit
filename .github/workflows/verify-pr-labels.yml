name: Verify Pull Request Labels

on:
  pull_request:
    types: [opened, ready_for_review, labeled, unlabeled]
    paths-ignore:
      - "CHANGELOG.md"

jobs:
  verify_pr_labels:
    if: github.event.pull_request.draft == false

    # https://github.com/cypress-io/github-action/blob/263091cab1962eea06e293a19146e9d0241a1c32/README.md#important
    runs-on: ubuntu-16.04

    steps:
      - name: Checkout
        uses: actions/checkout@v1

      - name: Install github actions dependencies
        uses: bahmutov/npm-install@v1.1.0
        with:
          working-directory: './.github/actions/verify-pr-labels'

      - name: Verify Pull Request Labels
        uses: ./.github/actions/verify-pr-labels
        with:
          github-token: '${{ secrets.GITHUB_TOKEN }}'
          use-lerna-json: true
