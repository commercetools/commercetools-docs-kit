# Gatsby Theme Add-On for API docs

This theme provides components in MDX to render API info from RAML spec files.

It is a feature add-on to `@commercetools-docs/gatsby-theme-docs` and is not usable standalone.

## Installation

```
npx install-peerdeps --dev @commercetools-docs/gatsby-theme-api-docs
```

## Usage

In your `gatsby-config.js`:

```js
const {
  configureThemeWithAddOns,
} = require('@commercetools-docs/gatsby-theme-docs/configure-theme');

module.exports = {
  // ... other site config
  plugins: [
    ...configureThemeWithAddOns({
      // ... other theme config
      addOns: [
        {
          resolve: '@commercetools-docs/gatsby-theme-api-docs',
          options: {
            transformerRaml: {
              includeApis: ['example'],
              movePropertiesToTop: ['id'],
              movePropertiesToBottom: ['custom'],
            },
          },
        },
      ],
    }),
  ],
};
```

### Available Plugin Options

See [RAMLdoc Generator Available Plugins](../gatsby-transformer-raml#available-plugin-options)

### Autogenerated Specs

This theme includes **@commercetools-docs/ramldoc-generator** for auto-generating API specifications. Simply run the following command:

```shell
npx commercetools-ramldoc-generator --name <api-spec-name> --src <api-spec-source-path>
```

See [RAMLdoc Generator](../ramldoc-generator) for more details and prerequisites.

### Autogenerated `./src/api-specs/`

RAML spec files have to be added in the `./src/api-specs/` folder of the website. This directory is required and is automatically generated when the plugin runs.

The file location determines the `apiKey` through which it can be addressed:

- `src/api-specs/foo.raml` -> apiKey `foo`
- `src/api-specs/bar/api.raml` -> apiKey `bar`
- `src/api-specs/baz/baz.raml` -> apiKey `baz`

## Using UI components in MDX

The package exposes the following components in the MDX context:

- `<ApiType>`: Renders an API type.

```jsx
{
  /*
  apiKey - name of the specs directory
  type - name of the api type
  hideInheritedProperties - optional prop that hides properties inherited from parent type except discriminator
*/
}
<ApiType apiKey="test" type="ExamplesTestType" hideInheritedProperties />;
```

- `<ApiEndpoint>`: Renders an API endpoint.

```jsx
{
  /*
  apiKey - name of the specs directory
  resource - path of the endpoint
  method - endpoint method e.g. get, post, delete.
  title - optional title to render
*/
}
<ApiEndpoint
  apiKey="test"
  resource="/{projectKey}/resource/artificially-complex/path/uri-parameter-one={uriParameterOne}/{uriParameterTwo}"
  method="POST"
  title="<optional>"
/>;
```

- `<ApiEndpointsForResource>`: Renders all endpoints of an API resource.

```jsx
{
  /*
  apiKey - name of the specs directory
  resource - path of the resource
*/
}
<ApiEndpointsForResource apiKey="test" resource="/{projectKey}/resource" />;
```
