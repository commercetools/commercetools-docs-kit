---
title: Self-learning Module
---

#  self-learning module

A module providing UI components and helper utilities to integrate self-learning functionality.

Works against commercetools' learning-api, which is not a part of this open source project.

## Public Components

The following components are the ones available for editor use directly in mdx files.

### Quiz

Quiz component can be used in any `mdx` page. It's responsible for fetching, rendering and handling all the interaction logic of a quiz answer submission.
The component simply renders a login CTA if the user is not logged in, otherwise the quiz is rendered.

The component expects 2 mandatory props:

- `courseId`: Id of the course defined in the LMS
- `quizId`: Id of the quiz defined in the LMS

Example

```md title="you write:" secondaryTheme
<Quiz courseId="5565" quizId="85065"/>
```

### CourseCard

Quiz card is a card component displaying information about a specific course. It supports logged in and logged out state. When the user is logged in, the course status is displayed.

The component has the following mandatory props:

- `title`: The course title.
- `href`: Relative path to the first course page
- `courseId`: The courseId
- `duration`: A string giving information about course duration

Example

```md title="you write:" secondaryTheme
<CourseCard duration="30 min" title="Course name" href="self-learning/overview" courseId="66">Course description. Introduction to extensibility possibilities available in Composable Commerce.</CourseCard>
```

### LearningPathCard

Learning path card is a card component displaying information about a learning path.

The component has the following mandatory props:

- `title`: The learning path title.
- `duration`: A string giving information about learning path duration
- `productName`: A string representing the product the learning path is referring to


Example

```md title="you write:" secondaryTheme
<LearningPathCard title="Overview" duration="1 hour 25 minutes | 7 courses" productName="Composable Commerce">
    This learning path is great for Composable Commerce administrators who create/maintain e-commerce data points, primarily work with a user interface, and have some familiarity with APIs.
</LearningPathCard>
```

### IfUserLoggedIn / IfUserLoggedOut

These components are used to wrap content that should only be displayed if the user is logged in or logged out respectively.

The components have 1 optional prop.

- `assumeTrue`: boolean, if set to `true` while auth0 is still loading the logged in/logged out user state, the component will render the content regardless.

Examples

```md title="you write:" secondaryTheme

<IfUserLoggedIn assumeTrue>
 ## Welcome back!
</IfUserLoggedIn>

```

```md title="you write:" secondaryTheme

<IfUserLoggedOut>
 ## Please log in
</IfUserLoggedOut>

```

### FirstName

This component simply render the first name of the logged in user, if the user is logged out, nothing is rendered.

Example

```md title="you write:" secondaryTheme

Hello <FirstName />, welcome back

```

### Learing path card with image on the side

In order to add an image on the side of a learning path card use the following pattern (the image must have been previously added to the /content/files directory)

```md title="you write:" secondaryTheme
<Cards>
  <LearningPathCard title="Overview" duration="1 hour 25 minutes | 7 courses" productName="Composable Commerce"> Description here</LearningPathCard>
  <ImageCard>

  ![learning path](/content/files/file-name.svg)

  </ImageCard>
</Cards>
```

### IfLearningPathComplete / IfLearningPathNotComplete

These components are used to wrap content that should only be/not be displayed if the user completed the learning path


Examples

```md title="you write:" secondaryTheme

<IfLearningPathComplete>
 Congratulations, you completed learning path
</IfLearningPathComplete>

```

```md title="you write:" secondaryTheme

<IfLearningPathNotComplete>
  Keep learning!
</IfLearningPathNotComplete>

```

## Internal Components

The following components are internal, used by docs-kit developers to provide the functionalities needed in the public components described above.
The purpose of this section is to create an internal reference for new developers involved in the self-learning project.

### useAuthToken (hook)

This hook is a wrapper aroung Auth0 sdk and it's used to get a valid Auth0 authentication token for the current logged in user.
It exposes `getAuthToken` function which can be used in the way described in the following example.

```javascript
const { getAuthToken } = useAuthToken();

// obtain the accessToken
const accessToken = await getAuthToken();

// ...then performs fetch passing the token as Authorization header
const response = await fetch(`http://exampleapi.com/user`, {
  'POST',
  headers: {
    Accept: 'application/json',
    Authorization: `Bearer ${accessToken}`,
  },
}
```

A typical use of this hook is to get a valid authorization token just before performing an API call against the learning api. The token value is usually passed as
`Authorizaton` header to the API.


### useUpdateUser (hook)

This hook can be used to update user profile data such as first name, family name or company.
It needs to be initialized with an object containing Auth0 userId of the user we want to update.

It exposes the following:

- `performUpdateUser`: It's the main function to be invoked when we want to update user profile. It recieves a mandatory Auth0 `User` parameter that represent the new user profile for the user.
Only the properties specified in the user object will be updated, the others will remain untouched.
- `isLoading`: It's a boolean value indicating if the update operation is still in progress (if `true`)
- `error`: In case of error, this property will contain error information. The format of error might depend on its type.
- `correlationId`: If the API returns a response including a `X-Correlation-ID` value, this property gets its value.
- `updatedUser`: If the update operation completes successfully, this property will contain the full updated `User` object.

Example:
```javascript
  const { performUpdateUser, isLoading, updatedUser, error } = useUpdateUser({
    userId: profile?.user_id || '',
  });

  onSubmit: async (formikValues: TProfileFormValues) => {
      const updatedUserBody = {
        family_name: 'Updated name',
        given_name: 'Updated family name',
        company: 'Updated company',
      };
      performUpdateUser(updatedUserBody);
    },
```

### useAttempt (hook)

This hook interacts with Moodle LMS through the learning API. In particular the purpose of this hook is to be able to retrieve an existing in progress quiz attempt for the currently logged in user with the specified course and quiz
or create a new one in case no in progress attempts exist.
The hook must be initialized with an object with the following structure:

```javascript

{
  courseId: '516' // the Moodle course ID
  quizId: '13' // the Moodle quiz ID
}

```

It exposes the following:

- `fetchAttempt`: It's the main function, it takes an optional boolean `forceNew` parameter. If that is passed `true`, the function will try to create and fetch a new attempt regardless of the fact that an existing in progress attempt might exist.
- `isLoading`: It's a boolean value indicating if the fetch operation is still in progress (if `true`)
- `error`: In case of error, this property will contain error information. The format of error might depend on its type.
- `correlationId`: If the API returns a response including a `X-Correlation-ID` value, this property gets its value.
- `attempt`: If the update operation completes successfully, this property will contain the value of the requested attempt with `QuizAttempt` type.

Example:

```javascript

const {
    fetchAttempt,
    attempt: quizData,
    isLoading,
    error,
    correlationId,
} = useAttempt({courseId: '561', quizId: '15'});

fetchAttempt(false); // do not force new attempt

useEffect(() => {
    handleAttempt(attempt); // perform operation as soon as attempt data is available
}, [attempt]);

```
